## はじめに

認証機能付きダッシュボードアプリケーションの開発環境を構築します。Next.jsプロジェクトの作成からSupabaseの設定まで、認証機能の実装に必要な基盤を整えます。

## 目的

- Next.jsプロジェクトの新規作成と基本設定
- Supabaseプロジェクトの作成と認証設定
- 必要な依存関係のインストール
- 環境変数の設定と動作確認

## 学習対象のスキル

- Next.jsプロジェクトの作成
- Supabaseプロジェクトの設定
- 環境変数の管理
- 開発サーバーの起動

## 前提環境

- Node.js LTS（18.0以上推奨）
- npmまたはyarn
- ブラウザ（Chrome、Firefox、Safari等）
- Supabaseアカウント

## 新規プロジェクトの作成

ターミナルで以下のコマンドを実行し、Next.jsプロジェクトを作成します。

```bash
npx create-next-app@latest lesson4-auth --typescript --tailwind --eslint --app --src-dir --import-alias "@/*" --yes
```

プロジェクト作成後、作成されたディレクトリに移動します。

```bash
cd lesson4-auth
```

## 依存関係の追加

Supabaseの認証機能に必要なパッケージをインストールします。

```bash
npm install @supabase/supabase-js @supabase/ssr
```

## Supabaseプロジェクトの作成

1. [Supabase](https://supabase.com)にアクセスし、アカウントを作成またはログインします
2. 「New Project」をクリックして新しいプロジェクトを作成します
3. プロジェクト名を「lesson4-auth」と入力します
4. データベースパスワードを設定します
5. リージョンを選択します（東京リージョン推奨）
6. 「Create new project」をクリックします

## 認証設定の有効化

1. プロジェクトダッシュボードで「Authentication」をクリックします
2. 「Settings」タブを選択します
3. 「Email」セクションで「Enable email confirmations」を無効にします（開発用）
4. 「Save」をクリックします

## 環境変数の設定

プロジェクトルートに`.env.local`ファイルを作成し、以下の内容を記述します。

```env
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url_here
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key_here
```

Supabaseプロジェクトの「Settings」→「API」から、以下を取得して設定します。

- `NEXT_PUBLIC_SUPABASE_URL`: Project URL
- `NEXT_PUBLIC_SUPABASE_ANON_KEY`: anon public key

## 動作確認

開発サーバーを起動して、プロジェクトが正常に動作することを確認します。

```bash
npm run dev
```

ブラウザで`http://localhost:3000`にアクセスし、Next.jsのデフォルトページが表示されることを確認します。

## 章末の確認

- 開発サーバーが正常に起動する
- ブラウザでトップページが表示される
- 環境変数が正しく設定されている
- Supabaseプロジェクトが作成されている
