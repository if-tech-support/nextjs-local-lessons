## はじめに

本章ではNext.jsプロジェクトを作成し開発サーバーを起動できる状態にする。

## 目的

Next.jsプロジェクトを初期化し、Tailwind導入・Supabase依存追加・環境変数設定までを行い開発サーバーを正常起動できる状態にする。

## 前提環境

- Node.js LTS（最新安定版）
- npm（yarn/pnpm可）
- Docker Desktop（ローカルでSupabaseを動かす場合のみ）

バージョン確認（任意）

```bash
node -v
npm -v
```

## 新規プロジェクト作成

方法A（推奨: 非対話・一発作成）

```bash
npx create-next-app@latest minishop \
  --ts \
  --eslint \
  --app \
  --src-dir \
  --tailwind \
  --import-alias "@/*" \
  --no-turbopack
```

方法B（対話式）

```bash
npx create-next-app@latest minishop
```

推奨回答:

- TypeScript: Yes
- ESLint: Yes
- App Router: Yes
- src Directory: Yes
- Tailwind CSS: Yes
- Import Alias: `@/*`
- Turbopack: No

## 初期起動確認

- 作成直後ディレクトリへ移動

```bash
cd minishop
npm run dev
```

- ブラウザで http://localhost:3000 表示
- 初期トップ画面表示を確認
- 停止はCtrl+C

Tailwind動作確認（任意）:

`src/app/page.tsx` の任意テキストに一時的に `text-red-500` を付与し、文字が赤くなればTailwind適用OK。確認後は削除。

## 依存追加

- Supabaseクライアント追加（SSR/Server Actions対応）

```bash
npm install @supabase/ssr
```

- 型補助と将来拡張のために導入（内部で `@supabase/supabase-js` を利用）

## 環境変数ファイル

- プロジェクト直下に `.env.local` 作成

```env
NEXT_PUBLIC_BASE_URL=http://localhost:3000
NEXT_PUBLIC_SUPABASE_URL=http://127.0.0.1:54321
NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY=YOUR_ANON_KEY
```

- 各値の意味:
  - `NEXT_PUBLIC_BASE_URL`: アプリのベースURL（リンク生成に利用予定）
  - `NEXT_PUBLIC_SUPABASE_URL`: ローカルSupabaseのAPI URL
  - `NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY`: 公開可能なanon key
- 後続章でAPIアクセスや型生成時に利用
- 値を変更した場合は開発サーバー再起動が安全
- `.env.local` はGit管理に含めない（秘匿値保護）

## Supabaseローカル起動（ローカルDB利用時のみ）

Docker Desktopを起動してから以下を実行

```bash
npm install -D supabase
npx supabase init
npx supabase start
```

- URLとanon keyを出力で確認
- `.env.local`に反映

## ディレクトリ確認

- 重要構成
  - `src/app/page.tsx`
  - `src/app/layout.tsx`
  - `postcss.config.mjs`
  - `package.json`
  - `src/app/globals.css`（Tailwindの基礎スタイル読込）
  - `tailwind.config.ts`（ユーティリティ生成設定）

## 章末の確認

検証観点（結果が得られればOK）
- 開発サーバー起動: `npm run dev` でエラーなし
- ルートアクセス: `http://localhost:3000` で初期トップページ表示
- Tailwind適用: 一時的な `text-red-500` で文字色赤（確認後削除）
- `.env.local` が存在し値3つを保持
- `@supabase/ssr` が `package.json` に記載

コマンド（一例）
```bash
npx create-next-app@latest minishop --ts --eslint --app --src-dir --tailwind --import-alias "@/*" --no-turbopack
npm install @supabase/ssr
touch .env.local
npm run dev
```
