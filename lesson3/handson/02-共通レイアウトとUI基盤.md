## はじめに

この章ではアプリ全体に共通するレイアウト・フォント・色トークンの基盤を整理し、最小の追加実装を通して理解を定着させます。ここで学ぶ内容は後続章の土台になります。

## 目的

- ルートレイアウトで「1回だけ定義する構造」と「各ページ固有の内容」を分けて理解する。
- フォント変数とTailwindトークンの橋渡し方法を身につける。
- CSSカスタムプロパティによる配色拡張の最小手順を体験する。

## 学習対象のスキル

- Next.jsルートレイアウトの役割と責務。
- フォント変数をTailwindで再利用する基本手順。
- ナビゲーションリンクの追加とクラス設計の最小変更。
- CSSカスタムプロパティを用いたテーマ色トークンの拡張。
- 小さな差分を正確に特定し追加する読み取り力。

## 課題A：Headerコンポーネントの作成（5分）
5分ほどヒントを参考にして仕様どおりにコーディングに挑戦し、その後に解答例で確認しましょう。

### 仕様
要約: 一覧ページへのリンクを含む最小のヘッダーを作成する。
- 対象ファイル: `src/app/components/Header.tsx`。
- `<header>` 要素直下にレイアウト用の `<div>` を1つ置く。
- `<div>` 内に一覧ページ `/memos` へ遷移する `<Link>` を1つ配置し表示テキストは `MemoLite`。
- `<header>` の見た目: 横幅いっぱいに広げ（全幅）、ページ上端に固定し（上端0pxで固定表示）、他要素より前面に出る重なり順を10とし、淡い水色背景にする（クラス: `w-full sticky top-0 z-10 bg-sky-200` ※順序維持）。
- 内側 `<div>` の配置と余白: 中央寄せ（左右自動マージン）し、最大幅を約48remに制限、左右16px・上下12pxの余白を付ける（クラス: `mx-auto max-w-3xl px-4 py-3`）。
- `<Link>` の表示: 文字サイズをやや大きく（約1.25rem）、太字、濃いめの青系文字色、ホバー時にポインター表示にする（クラス: `text-xl font-bold text-sky-900 hover:cursor-pointer`）。
- 既存の他要素（ナビ拡張用コメントなど）は追加しない。
- 除外（今回未実装）: Homeリンク / ナビ複数化 / アイコン / アクセント色トークン。

【使用タグ】
- `<header>`
  - `<div>`
    - `<Link>` (一覧 `/memos`)

### ヒント
- コンポーネントは `export default function Header()` 形式で定義する。
- `next/link` をインポートし忘れない。
- Tailwindの例：`sticky` `top-0` `max-w-3xl`

### 解答例
```tsx
// src/app/components/Header.tsx
import Link from 'next/link';

export default function Header() {
  return (
    <header className="w-full sticky top-0 z-10 bg-sky-200">
      <div className="mx-auto max-w-3xl px-4 py-3">
        <Link href="/memos" className="text-xl font-bold text-sky-900 hover:cursor-pointer">
          MemoLite
        </Link>
      </div>
    </header>
  );
}
```

## 課題B：Footerコンポーネントの作成（6分）
6分ほどヒントを参考にして仕様どおりにコーディングに挑戦し、その後に解答例で確認しましょう。

### 仕様
要約: 著作権表記を1行表示する最小フッターを作成する。
- 対象ファイル: `src/app/components/Footer.tsx`。
- 最上位要素は `<footer>` とし横幅を全体に広げる。
- `<footer>` の見た目: 全幅、上部に約40pxの余白（上マージン2.5rem）、淡い水色背景にする（クラス: `w-full mt-10 bg-sky-100`）。
- 内側 `<div>` の配置と文字: 中央寄せの箱を最大幅約48remで配置し、左右16px・上下24pxの余白、文字は中央揃えで濃い青系色にする（クラス: `mx-auto max-w-3xl px-4 py-6 text-center text-sky-900`）。
- 表示テキストは `© 2025 MemoLite`（全角スペース無し / 記号含め正確）。
- 追加のリンクや装飾は行わない。
- 除外（今回未実装）: 年の自動更新 / 外部リンク / ダークモード差分色。

【使用タグ】
- `<footer>`
  - `<div>`（著作権テキスト）

### ヒント
- シンプルな1段階入れ子で十分。
- 文字列のコピー時に記号や年号の半角/全角を崩さない。
- Tailwindの例：`mt-10` `text-center` `bg-sky-100`

### 解答例
```tsx
// src/app/components/Footer.tsx
export default function Footer() {
  return (
    <footer className="w-full mt-10 bg-sky-100">
      <div className="mx-auto max-w-3xl px-4 py-6 text-center text-sky-900">© 2025 MemoLite</div>
    </footer>
  );
}
```

## 課題C：レイアウトとグローバルスタイルの統合確認（12分）
12分ほどヒントを参考にして仕様どおりにコーディングに挑戦し、その後に解答例で確認しましょう。

### 仕様
要約: ルートレイアウトでHeader/Footerと共通スタイルを正しく読み込み全ページの共通骨組みを完成させる。
- 対象ファイル: `src/app/layout.tsx`, `src/app/globals.css`。
- `layout.tsx` で `./globals.css` を最上部近くで1回だけ読み込む。
- フォント設定は `Geist` を `variable: '--font-geist-sans'` で定義し `<html className={geistSans.variable}>` に適用。
- `<body>` の構造と見た目: 画面高さ全体を確保し（最小高さ=ビューポート高）、淡い水色背景にし、Flexレイアウトで縦方向に子要素を積み重ねる（クラス: `min-h-screen bg-sky-50 flex flex-col` ※順序維持）。
- `<main>` の配置とサイズ: 中央寄せ（左右自動マージン）、最大幅約48rem、全方向24pxの余白を付け、残りの縦スペースを占有して可変領域とする（クラス: `mx-auto max-w-3xl p-6 flex-1`）。
- `<Header />` を `<main>` の前、`<Footer />` を `<main>` の後に配置（順序固定）。
- `globals.css` には背景 / 文字色のカスタムプロパティ（`--background`, `--foreground`）とそれを参照する `@theme inline` が存在する（追加編集は不要）。
- 除外（今回未実装）: アクセント色トークン / Homeリンク追加 / コメント行追加。

【使用タグ】
`layout.tsx`
- `<html>`
  - `<body>`
    - `<Header />`
    - `<main>`
    - `<Footer />`
`globals.css`
- `:root`
- `@theme inline`

### ヒント
- `<main>` を `flex-1` にすることでフッターを最下部へ押し下げられる。
- フォント変数はHTML要素に付与するだけで子へ継承される。
- Tailwindの例：`min-h-screen` `flex-col` `flex-1`

### 解答例
```tsx
// src/app/layout.tsx
import type { Metadata } from 'next';
import { Geist } from 'next/font/google';
import './globals.css';
import Header from './components/Header';
import Footer from './components/Footer';

const geistSans = Geist({
  variable: '--font-geist-sans',
  subsets: ['latin'],
});

export const metadata: Metadata = {
  title: 'MemoLite | Lesson 3',
  description: 'Route Handlers, Redirect, Query Params, Supabase minimal',
};

export default function RootLayout({
  children,
}: Readonly<{ children: React.ReactNode }>) {
  return (
    <html lang="ja" className={geistSans.variable}>
      <body className="min-h-screen bg-sky-50 flex flex-col">
        <Header />
        <main className="mx-auto max-w-3xl p-6 flex-1">{children}</main>
        <Footer />
      </body>
    </html>
  );
}
```

## 章末の確認

- Headerが一覧リンクのみを持つ最小構造で表示されていること。
- Footerに著作権表記 `© 2025 MemoLite` が表示されていること。
- 全ページで背景色が淡い水色（`bg-sky-50`）になっていること。
- ビューポート高さ未満でもフッターが下部配置になっていること。
- レイアウト内のフォント変数クラスが `<html>` に1回だけ付与されていること。
