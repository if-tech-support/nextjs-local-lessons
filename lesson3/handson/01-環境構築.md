## はじめに

この章では、学習用に新規のNext.jsプロジェクトを作成し、`.env`の設定、依存関係のインストール、開発サーバーの起動と画面確認までを行います。

## 目的

- 依存パッケージをインストールし、開発サーバーを起動できる
- 環境変数（`.env`）を設定してAPIアクセスの準備ができている
- ブラウザーでトップページの表示を確認できる

## 学習対象のスキル

- `create-next-app`を用いた新規プロジェクトの作成
- 環境変数ファイル（`.env`）の設定
- Next.jsの開発サーバー運用（起動・停止・再起動）

## 前提環境の確認

- Node.jsは安定版（LTS）を推奨します。
- パッケージマネージャーはnpmを想定します（yarnやpnpmでも可）。

バージョン確認（任意）：

```bash
node -v
npm -v
```

## 新規プロジェクトの作成

学習用の作業フォルダーを任意の場所に作成し、Next.jsの新規プロジェクトを作成します。ここでは例としてプロジェクト名を`memolite`とします。

```bash
npx create-next-app@latest memolite \
	--ts \
	--tailwind \
	--app \
	--src \
	--eslint \
	--import-alias "@/*" \
	--no-turbopack

cd memolite
```

ポイント：`--ts`（TypeScript）`--app`（App Router）`--src`（`src/`ディレクトリー）`--tailwind`（Tailwind CSS）が有効になっていることを確認します。Tailwind CSSはv4構成が前提です。

## 依存パッケージの追加

後続章で使用するパッケージを追加します。

```bash
npm install @supabase/ssr
```

## Supabaseプロジェクトの作成

後続章でAPIと接続するため、先にSupabaseプロジェクトを用意します。

1. Supabaseにログインし、新規プロジェクトを作成する。
	- プロジェクト名の例：`memolite-<yourname>-dev`
	- リージョンは普段利用地域を選択。
	- データベースのパスワードを設定。
2. 作成完了後、ダッシュボードの「設定」→「API」を開き、次の値を控える。
	- Project URL（`NEXT_PUBLIC_SUPABASE_URL`に設定）
	- anon public key（`NEXT_PUBLIC_SUPABASE_ANON_KEY`に設定）
	- service_role key（必要に応じて`SUPABASE_SERVICE_ROLE_KEY`に設定。サーバー側のみで使用）

## 環境変数の設定（.env）

プロジェクト直下に`.env`を作成し、必要な値を設定します。

```bash
touch .env
```

`.env`に設定する主な項目：

- `NEXT_PUBLIC_BASE_URL`：通常は`http://localhost:3000`。
- `NEXT_PUBLIC_SUPABASE_URL`：SupabaseプロジェクトのURL。
- `NEXT_PUBLIC_SUPABASE_ANON_KEY`：SupabaseのAnonキー。
- `SUPABASE_SERVICE_ROLE_KEY`：必要に応じてサーバー側でのみ使用（未設定でも可）。

注意：キーは秘匿情報です。リポジトリーへコミットしないでください。

必要に応じて、次のテンプレートを参考に記入します。

```bash
NEXT_PUBLIC_BASE_URL=http://localhost:3000
NEXT_PUBLIC_SUPABASE_URL=（SupabaseのProject URL）
NEXT_PUBLIC_SUPABASE_ANON_KEY=（Supabaseのanon public key）
```

## 開発サーバーの起動

以下を実行して開発サーバーを起動します。

```bash
npm run dev
```

ブラウザーで`http://localhost:3000`を開き、トップページが表示されることを確認します（Next.jsの初期画面で問題ありません）。

## 動作確認

- `npm run dev`の実行後、ターミナルにエラーが出ていない。
- ブラウザーでトップページが表示できる。
- `.env`が作成済みで、値が入力されている（後続章で使用）。

以上で環境構築は完了です。次章ではAPIとページ機能の実装に進みます。

## 章末の確認

- 依存パッケージのインストールが完了している
- `.env`の`NEXT_PUBLIC_BASE_URL`とSupabaseの各キーが設定されている
- 開発サーバー起動後、トップページが表示できる
- `.env`の設定が済んでいる（後続章で使用）

コマンド再掲：

```bash
npx create-next-app@latest memolite --ts --tailwind --app --src --eslint --import-alias "@/*" --no-turbopack
cd memolite
npm install @supabase/ssr
touch .env
npm run dev
```
